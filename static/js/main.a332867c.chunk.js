(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[0],{43:function(e,t,n){},55:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(17),c=n.n(a),s=n(48),i=n.n(s),r=n(19),o=n(0),l=n.n(o),u=n(3),d=n(45),j=n(5),b=n(15),h=(n(55),n(43),n(7));var p=function(e){var t=Object(a.useState)(e.inputValue),n=Object(b.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(e.priority),r=Object(b.a)(i,2),o=r[0],l=r[1];function u(){s(e.inputValue),e.onClose()}return Object(a.useCallback)((function(e){}),[e.visible]),o||l("tiny"),e.visible?Object(h.jsx)("div",{className:"backdrop",children:Object(h.jsxs)("div",{className:"modal",children:[e.children,Object(h.jsx)("input",{autoFocus:!0,id:"textfield",type:"text",name:"name",value:c,onChange:function(e){return s(e.target.value)}}),e.task&&Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"priority-label",htmlFor:"priority-levels",children:"Priority"}),Object(h.jsxs)("select",{name:"priority-levels",id:"priority-levels",onChange:function(e){return l(e.target.value)},children:[Object(h.jsx)("option",{selected:"tiny"===o,value:"tiny",children:"Low"}),Object(h.jsx)("option",{selected:"medium"===o,value:"medium",children:"Medium"}),Object(h.jsx)("option",{selected:"high"===o,value:"high",children:"High"})]})]}),Object(h.jsxs)("div",{className:"alert-buttons",children:[Object(h.jsx)("button",{className:"alert-button alert-cancel",type:"button",onClick:u,children:e.cancelName}),Object(h.jsx)("button",{className:"alert-button alert-ok",type:"button",onClick:function(){e.task&&!e.edit?(o||l("tiny"),e.onAddTaskOkay(e.listWithoutId,c,o)):e.onOk(c,o),u(),e.edit?s(c):s("")},children:e.okName})]})]})}):null};var m=function(e){return Object(h.jsx)("div",{className:"wrapper",children:e.children})};function O(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],s=n[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{tabIndex:"0",onKeyPress:function(t){("Enter"===t.key||"Space"===t.code)&&e.onClick(e.list.id)},onClick:function(){return e.onClick(e.list.id)},className:"boxes",id:"list-box-1",children:[Object(h.jsx)("img",{alt:"List Icon",src:"list-solid.svg"}),Object(h.jsx)("div",{children:e.list.sharedWith.length>1&&Object(h.jsx)("img",{tabIndex:"0",alt:"Shared List",src:"user-friends-solid.svg"})}),Object(h.jsx)("span",{children:e.list.title}),Object(h.jsxs)("div",{className:"edit-delete-button-container",children:[Object(h.jsx)("img",{tabIndex:"0",className:"edit-delete-button",onClick:function(e){e.stopPropagation(),s(!0)},onKeyPress:function(e){e.stopPropagation(),e.preventDefault(),("Enter"===e.key||"Space"===e.code)&&s(!0)},alt:"Edit Pen",src:"edit-solid.svg"}),Object(h.jsx)("img",{tabIndex:"0",alt:"Delete X",className:"edit-delete-button",onKeyPress:function(t){"Enter"===t.key&&e.handleDelete(e.list.id,t)},onClick:function(t){return e.handleDelete(e.list.id,t)},src:"times-solid.svg"})]})]}),Object(h.jsx)(p,{task:!1,edit:!0,inputValue:e.list.title,visible:c,onClose:function(){return s(!1)},onOk:function(t){e.updateList(e.list.id,t)},cancelName:"Don't Save",okName:"Save",children:Object(h.jsx)("div",{children:"Edit List:"})})]})}var x=function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],s=n[1];return Object(h.jsxs)(m,{children:[Object(h.jsx)("h1",{id:"MyLists",children:"My Lists"}),e.data&&e.data.map((function(t){return Object(h.jsx)(O,{handleDelete:e.handleDelete,updateList:e.updateList,setData:e.setData,data:e.data,list:t,onClick:e.onListClick})})),Object(h.jsx)("div",{id:"button1",children:Object(h.jsxs)("button",{onClick:function(){return s(!0)},className:"addList addTask",children:[Object(h.jsx)("img",{alt:"Add +",src:"plus-solid.svg"}),Object(h.jsx)("span",{children:"Add List"})]})}),Object(h.jsx)(p,{task:!1,edit:!1,inputValue:"",visible:c,onClose:function(){return s(!1)},onOk:function(t){e.setData(t)},cancelName:"Don't Add",okName:"Add",children:Object(h.jsx)("div",{children:"Add List:"})})]})},f=n(35),g=n(29),k=n(36);function v(e){console.log(e.currentTasks);var t,n=Object(a.useState)(e.completed),c=Object(b.a)(n,2),s=(c[0],c[1],Object(a.useState)(!1)),i=Object(b.a)(s,2),r=i[0],o=i[1];function l(t){t.stopPropagation(),e.deleteTask(e.list.id,e.id)}return Object(h.jsxs)("div",{id:"box1",className:"boxes boxes-blue",children:[Object(h.jsx)("input",{onKeyUp:function(t){("Enter"===t.key||"Space"===t.code)&&e.updateTask(e.list.id,e.id,e.listitem,!e.completed,e.priority)},tabIndex:"0",checked:e.completed,type:"checkbox",onChange:function(){e.updateTask(e.list.id,e.id,e.listitem,!e.completed,e.priority)}}),Object(h.jsx)("label",{children:e.listitem}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"edit-delete-button-container",children:[(t=e.priority,"high"==t?Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{className:"priority-img",onClick:function(){return o(!0)},alt:"Exclatmation Point",src:"exclamation-solid.svg"}),Object(h.jsx)("img",{className:"priority-img",onClick:function(){return o(!0)},alt:"Exclatmation Point",src:"exclamation-solid.svg"})]}):"medium"==t?Object(h.jsx)("div",{children:Object(h.jsx)("img",{className:"priority-img",alt:"Exclatmation Point",onClick:function(){return o(!0)},src:"exclamation-solid.svg"})}):Object(h.jsx)("div",{})),Object(h.jsx)("img",{tabIndex:"0",className:"edit-delete-button",alt:"Edit Pen",onKeyPress:function(e){e.preventDefault(),("Enter"===e.key||"Space"===e.code)&&o(!0)},onClick:function(){return o(!0)},src:"edit-solid.svg"}),Object(h.jsx)("img",{tabIndex:"0",className:"edit-delete-button",alt:"Delete X",onKeyPress:function(e){("Enter"===e.key||"Space"===e.code)&&l(e)},onClick:function(e){return l(e)},src:"times-solid.svg"})]}),Object(h.jsx)(p,{edit:!0,priority:e.priority,task:!0,visible:r,inputValue:e.listitem,onClose:function(){return o(!1)},onOk:function(t,n){e.updateTask(e.list.id,e.id,t,e.completed,n)},cancelName:"Don't Save",okName:"Save",children:Object(h.jsx)("div",{children:"Edit Task:"})})]})}var y=function(e){var t,n,c=Object(a.useState)(!1),s=Object(b.a)(c,2),i=s[0],r=s[1],o=Object(a.useState)([]),l=Object(b.a)(o,2),u=l[0],d=l[1],O=Object(a.useState)("title"),x=Object(b.a)(O,2),g=x[0],k=x[1],y=(e.collectionRef,Object(f.a)(e.collectionRef.doc(e.list.id).collection("tasks").orderBy(g))),N=Object(b.a)(y,3),S=N[0],C=N[1],w=(N[2],!1===C?S.docs.map((function(e){return e.data()})):[]),I=Object(a.useState)(""),T=Object(b.a)(I,2),P=T[0],D=T[1],E=Object(a.useState)(""),A=Object(b.a)(E,2),L=A[0],F=A[1];return Object(h.jsxs)(m,{children:[Object(h.jsx)("h1",{children:e.data[0].title}),Object(h.jsxs)("div",{className:"share",children:[e.user.uid==e.data[0].owner&&Object(h.jsx)("input",{className:"share",placeholder:"Enter Friends Email",type:"text",name:"shared_email",onChange:function(e){return D(e.target.value)}}),e.user.uid==e.data[0].owner&&Object(h.jsx)("button",(t={className:"share"},Object(j.a)(t,"className","share"),Object(j.a)(t,"onClick",(function(){return e.handleShare(P,e.list.id)})),Object(j.a)(t,"children"," Share List "),t))]}),Object(h.jsxs)("div",{className:"unshare",children:[e.user.uid==e.data[0].owner&&Object(h.jsx)("input",{className:"unshare",placeholder:"Enter Email To Remove",type:"text",name:"unshared_email",onChange:function(e){return F(e.target.value)}}),e.user.uid==e.data[0].owner&&Object(h.jsx)("button",(n={className:"unshare"},Object(j.a)(n,"className","unshare"),Object(j.a)(n,"onClick",(function(){return e.handleUnShare(L,e.list.id)})),Object(j.a)(n,"children"," Remove Collaborator"),n))]}),Object(h.jsxs)("div",{className:"filters",children:[Object(h.jsx)("label",{className:"filter-dropdown",htmlFor:"filters",children:"Filters"}),Object(h.jsxs)("select",{name:"filters",id:"filter-select",onChange:function(e){return k(e.target.value)},children:[Object(h.jsx)("option",{value:"title",children:"Name"}),Object(h.jsx)("option",{value:"created",children:"Creation Date"}),Object(h.jsx)("option",{value:"priority",children:"Priority"})]})]}),w.filter((function(e){return!e.completed})).map((function(t){return Object(h.jsx)(v,{deleteTask:e.deleteTask,updateTask:e.updateTask,setTasks:d,currentTasks:u,list:e.list,setData:e.setData,data:e.data,id:t.id,listitem:t.title,completed:t.completed,priority:t.priority})})),Object(h.jsx)("hr",{}),Object(h.jsx)("h3",{className:"completed",children:"Completed:"}),Object(h.jsx)("button",{className:"completed-button",onClick:function(){return function(t){t.filter((function(e){return e.completed})).map((function(t){return e.deleteTask(e.list.id,t.id)}))}(w)},children:"Delete All Completed"}),w.filter((function(e){return e.completed})).map((function(t){return Object(h.jsx)(v,{deleteTask:e.deleteTask,updateTask:e.updateTask,setTasks:d,currentTasks:u,list:e.list,setData:e.setData,data:e.data,id:t.id,listitem:t.title,completed:t.completed,priority:t.priority})})),Object(h.jsx)("div",{id:"button1",children:Object(h.jsxs)("button",{onClick:function(){r(!0)},className:"addTask",children:[Object(h.jsx)("img",{alt:"Add +",src:"plus-solid.svg"}),Object(h.jsx)("span",{children:"Add Task"})]})}),Object(h.jsx)(p,{edit:!1,priority:e.priority,task:!0,visible:i,onClose:function(){return r(!1)},listWithoutId:e.list,list:e.list.id,onOk:console.log("Oops"),onAddTaskOkay:e.addListItem,cancelName:"Don't Add",okName:"Add",children:Object(h.jsx)("div",{children:"Add Task:"})})]})},N=n(46),S=n(49),C=n(28),w=k.a.initializeApp({apiKey:"AIzaSyB8G1WCYinf4GWK7GMzLkP8PlLujGnNqHM",authDomain:"cs124-lab.firebaseapp.com",projectId:"cs124-lab",storageBucket:"cs124-lab.appspot.com",messagingSenderId:"385341419353",appId:"1:385341419353:web:fe357b4ea465efcdff2648",measurementId:"G-PB2T6D5MN8"}),I=(Object(S.a)(w),k.a.firestore()),T=Object(C.c)(),P=new C.a;function D(e){var t="App_Data",n=I.collection(t).where("sharedWith","array-contains",e.user.email),c=Object(a.useState)(!1),s=Object(b.a)(c,2),i=(s[0],s[1]),o=I.collection(t),d=Object(f.a)(n),j=Object(b.a)(d,3),p=j[0],m=j[1];j[2];m||p&&p.docs.map(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,Object(g.a)(t.ref);case 3:return e.t1=e.sent.data().title,e.abrupt("return",e.t0.log.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var O=null;p&&(O=!1===m?p.docs.map((function(e){return e.data()})):[]);var v=Object(a.useState)(!1),S=Object(b.a)(v,2),C=(S[0],S[1],Object(a.useState)(!1)),w=Object(b.a)(C,2),T=(w[0],w[1],Object(a.useState)(0)),P=Object(b.a)(T,2),D=(P[0],P[1],Object(a.useState)({type:"home"})),E=Object(b.a)(D,2),A=E[0],L=E[1];function F(){i(!1),L({type:"home"})}function W(){return(W=Object(u.a)(l.a.mark((function t(n,a){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.a)(o.doc(a));case 2:if(c=t.sent,e.user.uid==c.data().owner){t.next=7;break}console.log("You do not have permision to do this."),t.next=14;break;case 7:if(!c.exists()){t.next=13;break}return e.user.email==n&&console.log("You are the owner, you already have access to this list"),t.next=11,o.doc(a).update({sharedWith:[].concat(Object(r.a)(c.data().sharedWith),[n])});case 11:t.next=14;break;case 13:console.log("No such document!");case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(){return(K=Object(u.a)(l.a.mark((function t(n,a){var c,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.a)(o.doc(a));case 2:if(c=t.sent,e.user.uid==c.data().owner){t.next=7;break}console.log("You do not have permision to do this."),t.next=17;break;case 7:if(!c.exists()){t.next=16;break}return e.user.email==n&&console.log("You are the owner, you can't remove yourself."),s=c.data().sharedWith,i=s.filter((function(e){return e!=n})),console.log("unShareEmail",i),t.next=14,o.doc(a).update({sharedWith:i});case 14:t.next=17;break;case 16:console.log("No such document!");case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(){return(H=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],m){e.next=7;break}return a=o.doc(t).collection(t),e.next=5,Object(g.b)(a);case 5:e.sent.forEach((function(e){n.push([e.data().id,e.data().title,e.data().completed,e.data().priority])}));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(u.a)(l.a.mark((function e(t,n,a,c,s){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.doc(t).collection("tasks").doc(n).update({title:a,completed:c,priority:s});case 2:i(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.doc(t).update({title:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.doc(t).collection("tasks").doc(n).delete();case 2:i(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G={home:Object(h.jsxs)(h.Fragment,{children:[m&&Object(h.jsx)("h1",{children:"Loading"}),Object(h.jsx)("signedInPage",{}),Object(h.jsx)("button",{onClick:function(){return e.signOut()},children:" Sign Out "}),Object(h.jsx)(x,{updateList:function(e,t){return M.apply(this,arguments)},handleDelete:function(e,t){o.doc(e).delete(),t.stopPropagation()},setData:function(t){var n={id:Object(N.a)(),title:t,owner:e.user.uid,sharedWith:[e.user.email]};o.doc(n.id).set(n)},data:O,onListClick:function(e){return L({type:"list",selectedId:e})}})]}),list:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{tabIndex:"0",onKeyPress:function(e){("Enter"===e.key||"Space"===e.code)&&F()},onClick:function(){return F()},alt:"Back Arrow",src:"long-arrow-alt-left-solid.svg",className:"back-arrow"}),O&&Object(h.jsx)(y,{handleUnShare:function(e,t){return K.apply(this,arguments)},handleShare:function(e,t){return W.apply(this,arguments)},user:e.user,collectionRef:o,query:f.a,deleteTask:function(e,t){return U.apply(this,arguments)},updateTask:function(e,t,n,a,c){return B.apply(this,arguments)},setFetch:i,fetch:m,data:O.filter((function(e){return e.id==A.selectedId})),getDocInfo:function(e){return H.apply(this,arguments)},addListItem:function(t,n,a){var c={id:Object(N.a)(),title:n,completed:!1,priority:a,created:k.a.database.ServerValue.TIMESTAMP,owner:e.user.uid,sharedWith:[e.user.email]};t.collection("tasks").doc(c.id).set(c),i(!1)},list:o.doc(A.selectedId)})]})};return Object(h.jsx)("div",{children:G[A.type]})}var E=function(e){var t,n,c,s,i=Object(a.useState)({type:"trueHome"}),r=Object(b.a)(i,2),o=r[0],l=r[1],u=Object(a.useState)(""),p=Object(b.a)(u,2),m=p[0],O=p[1],x=Object(a.useState)(""),f=Object(b.a)(x,2),g=f[0],k=f[1],v=Object(a.useState)(null),y=Object(b.a)(v,2),N=y[0],S=y[1],w=Object(a.useState)(!0),I=Object(b.a)(w,2),E=I[0],A=I[1],L=Object(a.useState)(!0),F=Object(b.a)(L,2),W=F[0],K=F[1];function H(){Object(C.e)(T,P).then((function(e){C.a.credentialFromResult(e).accessToken;var t=e.user;S(t),console.log("Signed In!"),console.log(t),l({type:"home"})})).catch((function(e){e.code,e.message,e.email,C.a.credentialFromError(e);console.log("try signing in again!"),A(!1)}))}return{signIn:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{tabIndex:"0",onKeyPress:function(e){("Enter"===e.key||"Space"===e.code)&&l({type:"trueHome"})},onClick:function(){return l({type:"trueHome"})},alt:"Back Arrow",src:"long-arrow-alt-left-solid.svg",className:"back-arrow"}),Object(h.jsx)("h1",{className:"homeName",children:"Sign into your Account"}),!E&&Object(h.jsx)("p",{className:"wrongPass",children:"Wrong username or password"}),Object(h.jsxs)("div",{className:"authbuttons",children:[Object(h.jsx)("input",{className:"authitems",placeholder:"Email",type:"text",name:"email",onChange:function(e){return O(e.target.value)}}),Object(h.jsx)("input",{className:"authitems",placeholder:"Password",type:"password",name:"password",onChange:function(e){return k(e.target.value)}}),Object(h.jsx)("button",(t={className:"authitems"},Object(j.a)(t,"className","authSubmit"),Object(j.a)(t,"onClick",(function(){return e=m,t=g,void Object(C.d)(T,e,t).then((function(e){var t=e.user;S(t),console.log("Signed In!"),console.log(t),l({type:"home"})})).catch((function(e){e.code,e.message,console.log("try signing in again!"),A(!1)}));var e,t})),Object(j.a)(t,"children"," Sign In "),t)),Object(h.jsx)("p",{className:"authOption",children:"or"}),Object(h.jsx)("button",(n={className:"authitems"},Object(j.a)(n,"className","authSubmit"),Object(j.a)(n,"onClick",(function(){return H()})),Object(j.a)(n,"children","Sign In with Google"),n))]})]}),signUp:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{tabIndex:"0",onKeyPress:function(e){("Enter"===e.key||"Space"===e.code)&&l({type:"trueHome"})},onClick:function(){return l({type:"trueHome"})},alt:"Back Arrow",src:"long-arrow-alt-left-solid.svg",className:"back-arrow"}),Object(h.jsx)("h1",{className:"homeName",children:"Create an Account"}),!W&&Object(h.jsx)("p",{className:"wrongPass",children:"Invalid email or password"}),Object(h.jsxs)("div",{className:"authbuttons",children:[Object(h.jsx)("input",{className:"authitems",placeholder:"Email",type:"text",name:"email",onChange:function(e){return O(e.target.value)}}),Object(h.jsx)("input",{className:"authitems",placeholder:"Password",type:"password",name:"password",onChange:function(e){return k(e.target.value)}}),Object(h.jsx)("button",(c={className:"authitems"},Object(j.a)(c,"className","authSubmit"),Object(j.a)(c,"onClick",(function(){return e=m,t=g,void Object(C.b)(T,e,t).then((function(e){var t=e.user;console.log("Signed Up!"),S(t),l({type:"home"})})).catch((function(e){e.code,e.message,console.log("try signing up again!"),K(!1)}));var e,t})),Object(j.a)(c,"children"," Sign Up "),c)),Object(h.jsx)("p",{className:"authOption",children:"or"}),Object(h.jsx)("button",(s={className:"authitems"},Object(j.a)(s,"className","authSubmit"),Object(j.a)(s,"onClick",(function(){return H()})),Object(j.a)(s,"children","Sign Up with Google"),s))]})]}),trueHome:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"homeName",children:"Home"}),Object(h.jsxs)("div",{className:"authbuttons",children:[Object(h.jsx)("button",{onClick:function(){return l({type:"signIn"})},children:"Sign In"}),Object(h.jsx)("p",{className:"authOption",children:"or"}),Object(h.jsx)("button",{className:"authSubmit",onClick:function(){return l({type:"signUp"})},children:"Create an Account"})]})]}),home:Object(h.jsx)("div",{children:Object(h.jsx)(D,Object(d.a)(Object(d.a)({},e),{},{user:N,signOut:function(){l({type:"trueHome"})}}))})}[o.type]},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(E,{})}),document.getElementById("root")),A()}},[[58,1,2]]]);
//# sourceMappingURL=main.a332867c.chunk.js.map