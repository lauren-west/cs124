{"ast":null,"code":"import _regeneratorRuntime from\"/Users/laurenwest/code/cs124/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/laurenwest/code/cs124/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/laurenwest/code/cs124/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./AlertApp.css';import React,{useState}from\"react\";import MainPage from'./MainPage';import Lists from\"./Lists\";import firebase from\"firebase/compat\";import{useCollection}from\"react-firebase-hooks/firestore\";import{collection,doc,setDoc,query,where,getDoc,getDocs,updateDoc,deleteDoc}from\"firebase/firestore\";import{generateUniqueID}from\"web-vitals/dist/modules/lib/generateUniqueID\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var firebaseConfig={apiKey:\"AIzaSyCcQ6XCOvMIA7pHME4bWBgy_7OVy_7XErA\",authDomain:\"cs124-fall2021.firebaseapp.com\",projectId:\"cs124-fall2021\",storageBucket:\"cs124-fall2021.appspot.com\",messagingSenderId:\"264318304667\",appId:\"1:264318304667:web:4be8d27a02811b1ccd613e\"};firebase.initializeApp(firebaseConfig);var db=firebase.firestore();function App(){var collectionName=\"lewing-hmc-tasks2\";var query=db.collection(collectionName);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hasFetchedTask=_useState2[0],setFetch=_useState2[1];var collectionRef=db.collection(collectionName);var _useCollection=useCollection(query),_useCollection2=_slicedToArray(_useCollection,3),value=_useCollection2[0],loading=_useCollection2[1],error=_useCollection2[2];if(!loading){value.docs.map(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(x){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=console;_context.next=3;return getDoc(x.ref);case 3:_context.t1=_context.sent.data().title;return _context.abrupt(\"return\",_context.t0.log.call(_context.t0,_context.t1));case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}var data=loading===false?value.docs.map(function(element){return element.data();}):[];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showAlert=_useState4[0],setShowAlert=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showEditAlert=_useState6[0],setShowEditAlert=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),listId=_useState8[0],setListId=_useState8[1];var _useState9=useState({type:\"home\"}),_useState10=_slicedToArray(_useState9,2),selectedPage=_useState10[0],setPage=_useState10[1];function handleAddList(listName){var List={id:generateUniqueID(),title:listName};collectionRef.doc(List.id).set(List);}function handleDeleteList(id,e){collectionRef.doc(id).delete();e.stopPropagation();}function setFetchAndPage(){setFetch(false);setPage({type:\"home\"});}function addListItem(list,itemName,priority){var Task={id:generateUniqueID(),title:itemName,completed:false,priority:priority// planning on low, medium, high\n};list.collection(list.id).doc(Task.id).set(Task);setFetch(false);}function getDocInfo(_x2){return _getDocInfo.apply(this,arguments);}function _getDocInfo(){_getDocInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var currTasks,q,querySnapshot;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:currTasks=[];if(loading){_context2.next=7;break;}q=collectionRef.doc(id).collection(id);_context2.next=5;return getDocs(q);case 5:querySnapshot=_context2.sent;querySnapshot.forEach(function(doc){currTasks.push([doc.data().id,doc.data().title,doc.data().completed,doc.data().priority]);});case 7:return _context2.abrupt(\"return\",currTasks);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _getDocInfo.apply(this,arguments);}function updateTask(_x3,_x4,_x5,_x6,_x7){return _updateTask.apply(this,arguments);}function _updateTask(){_updateTask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(listid,taskid,title_val,comp_value,priority_value){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return collectionRef.doc(listid).collection(listid).doc(taskid).update({title:title_val,completed:comp_value,priority:priority_value});case 2:setFetch(false);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _updateTask.apply(this,arguments);}function updateList(_x8,_x9){return _updateList.apply(this,arguments);}function _updateList(){_updateList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id,title_val){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return collectionRef.doc(id).update({title:title_val});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _updateList.apply(this,arguments);}function deleteTask(_x10,_x11){return _deleteTask.apply(this,arguments);}function _deleteTask(){_deleteTask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(listid,taskid){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return collectionRef.doc(listid).collection(listid).doc(taskid).delete();case 2:setFetch(false);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return _deleteTask.apply(this,arguments);}var pageRenderLookup={\"home\":/*#__PURE__*/_jsx(MainPage,{updateList:updateList,handleDelete:handleDeleteList,setData:handleAddList,data:data,onListClick:function onListClick(n){return setPage({type:\"list\",selectedId:n});}}),\"list\":/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return setFetchAndPage();},src:\"long-arrow-alt-left-solid.svg\",className:\"back-arrow\"}),/*#__PURE__*/_jsx(Lists,{collectionRef:collectionRef,query:useCollection,deleteTask:deleteTask,updateTask:updateTask,setFetch:setFetch,fetch:loading,data:data.filter(function(x){return x.id==selectedPage.selectedId;}),getDocInfo:getDocInfo,addListItem:addListItem,list:collectionRef.doc(selectedPage.selectedId)})]})};return pageRenderLookup[selectedPage.type];}export default App;","map":{"version":3,"sources":["/Users/laurenwest/code/cs124/src/App.js"],"names":["React","useState","MainPage","Lists","firebase","useCollection","collection","doc","setDoc","query","where","getDoc","getDocs","updateDoc","deleteDoc","generateUniqueID","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","initializeApp","db","firestore","App","collectionName","hasFetchedTask","setFetch","collectionRef","value","loading","error","docs","map","x","console","ref","data","title","log","element","showAlert","setShowAlert","showEditAlert","setShowEditAlert","listId","setListId","type","selectedPage","setPage","handleAddList","listName","List","id","set","handleDeleteList","e","delete","stopPropagation","setFetchAndPage","addListItem","list","itemName","priority","Task","completed","getDocInfo","currTasks","q","querySnapshot","forEach","push","updateTask","listid","taskid","title_val","comp_value","priority_value","update","updateList","deleteTask","pageRenderLookup","n","selectedId","filter"],"mappings":"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","sourcesContent":["import './AlertApp.css';\nimport React, {useState} from \"react\";\nimport MainPage from './MainPage'\nimport Lists from \"./Lists\";\nimport firebase from \"firebase/compat\";\nimport {useCollection} from \"react-firebase-hooks/firestore\";\nimport {collection, doc, setDoc, query, where, getDoc, getDocs, updateDoc, deleteDoc} from \"firebase/firestore\";\nimport {generateUniqueID} from \"web-vitals/dist/modules/lib/generateUniqueID\";\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCcQ6XCOvMIA7pHME4bWBgy_7OVy_7XErA\",\n    authDomain: \"cs124-fall2021.firebaseapp.com\",\n    projectId: \"cs124-fall2021\",\n    storageBucket: \"cs124-fall2021.appspot.com\",\n    messagingSenderId: \"264318304667\",\n    appId: \"1:264318304667:web:4be8d27a02811b1ccd613e\"\n};\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\n\nfunction App() {\n\n    const collectionName = \"lewing-hmc-tasks2\"\n    const query = db.collection(collectionName);\n    const [hasFetchedTask, setFetch] = useState(false);\n    let collectionRef = db.collection(collectionName)\n    const [value, loading, error] = useCollection(query)\n    if (!loading) {\n        value.docs.map(async (x) => console.log((await getDoc(x.ref)).data().title))\n    }\n    const data = loading === false ? value.docs.map((element)=> element.data()) : []\n\n    const [showAlert, setShowAlert] = useState(false);\n    const [showEditAlert, setShowEditAlert] = useState(false);\n    let [listId, setListId] = useState(0);\n    let [selectedPage, setPage] = useState({\n        type: \"home\"\n    })\n\n    function handleAddList(listName) {\n        const List = {\n            id: generateUniqueID(),\n            title: listName,\n        }\n        collectionRef.doc(List.id).set(List)\n    }\n\n\n    function handleDeleteList(id, e){\n        collectionRef.doc(id).delete()\n        e.stopPropagation()\n    }\n\n    function setFetchAndPage(){\n        setFetch(false);\n        setPage({type: \"home\"});\n    }\n\n    function addListItem(list, itemName, priority){\n        const Task = {\n            id: generateUniqueID(),\n            title: itemName,\n            completed: false,\n            priority: priority // planning on low, medium, high\n        }\n        list.collection(list.id).doc(Task.id).set(Task)\n        setFetch(false)\n    }\n\n    async function getDocInfo(id){\n        let currTasks = [];\n        if(!loading){\n            const q = collectionRef.doc(id).collection(id);\n            const querySnapshot = await getDocs(q);\n            querySnapshot.forEach((doc) => {\n                currTasks.push([doc.data().id, doc.data().title, doc.data().completed, doc.data().priority]);\n        });}\n        return currTasks;\n    }\n\n    async function updateTask(listid, taskid, title_val, comp_value, priority_value){\n        await collectionRef.doc(listid)\n            .collection(listid)\n            .doc(taskid)\n            .update({\n                title: title_val,\n                completed: comp_value,\n                priority: priority_value\n            });\n        setFetch(false)\n    }\n\n    async function updateList(id, title_val){\n        await collectionRef.doc(id).update({\n                title: title_val\n            })\n    }\n\n    async function deleteTask(listid, taskid){\n        await collectionRef.doc(listid).collection(listid).doc(taskid).delete();\n        setFetch(false)\n\n    }\n\n    const pageRenderLookup = {\n        \"home\": (\n                <MainPage updateList={updateList} handleDelete={handleDeleteList} setData={handleAddList} data={data} onListClick={(n) =>\n                    setPage({\n                    type: \"list\",\n                    selectedId: n\n                })}/>\n        ),\n        \"list\": (\n            <>\n                <img onClick={() => setFetchAndPage()} src={\"long-arrow-alt-left-solid.svg\"} className={\"back-arrow\"}/>\n                <Lists collectionRef={collectionRef} query={useCollection} deleteTask={deleteTask} updateTask={updateTask} setFetch={setFetch} fetch={loading} data={data.filter((x) => x.id == selectedPage.selectedId)}  getDocInfo={getDocInfo} addListItem={addListItem} list={collectionRef.doc(selectedPage.selectedId)}/>\n            </>\n        )\n    }\n    return pageRenderLookup[selectedPage.type]\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}